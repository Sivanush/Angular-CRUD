<app-header></app-header>

<div class="flex justify-center items-center mt-20">
  <div class="card">
    <!-- *ngIf with isLoading -->
    <div *ngIf="isLoading" class="spinner-container">
      <div class="spinner"></div>
    </div>
    
    <div class="user-table">
      <table>
        <thead>
          <tr>
            <th>No.</th>
            <th>Username</th>
            <th>Email</th>
            <th>Image</th>
            <th>Edit</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td><img [src]="user.image" alt="User Image"></td>
            <td>
              <button (click)="editUser(user)" class="edit-btn">Edit</button>
            </td>
            <td>
              <button class="delete-btn" (click)="deleteUser(user._id)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
  </div>
</div>



<div class="card flex justify-content-center">
  <p-dialog [(visible)]="visible">
      <ng-template pTemplate="content">
          <div  class="flex flex-column px-8 py-5 gap-4" style="border-radius: 12px; background-image: radial-gradient(circle at left top, var(--primary-400), var(--primary-700))">
              <svg width="33" height="35" viewBox="0 0 33 35" fill="none" xmlns="http://www.w3.org/2000/svg" class="block mx-auto">
                  <!-- SVG path content -->
              </svg>
              <!-- Form for editing user data -->
              <div class="inline-flex flex-column gap-2">
                  <label for="username" class="text-primary-50 font-semibold">Username</label>
                  <input pInputText id="username" [(ngModel)]="editedUser.username" class="bg-white-alpha-20 border-none p-3 text-primary-50"/>
              </div>
              <div class="inline-flex flex-column gap-2">
                  <label for="email" class="text-primary-50 font-semibold">Email</label>
                  <input pInputText id="email" [(ngModel)]="editedUser.email" class="bg-white-alpha-20 border-none p-3 text-primary-50"/>
              </div>
              <div class="inline-flex flex-column gap-2">
                  <label for="image" class="text-primary-50 font-semibold">Image URL</label>
                  <input pInputText id="image"  [(ngModel)]="editedUser.image" class="bg-white-alpha-20 border-none p-3 text-primary-50"/>
              </div>
              <!-- Button to save changes -->
              <div class="flex align-items-center gap-2">
                  <p-button label="Save Changes" (click)="saveChanges()" styleClass="w-full text-primary-50 border-1 border-white-alpha-30 hover:bg-white-alpha-10" class="w-full"></p-button>
                  <p-button label="Cancel" (click)="closeDialog()" styleClass="w-full text-primary-50 border-1 border-white-alpha-30 hover:bg-white-alpha-10" class="w-full"></p-button>
              </div>
          </div>
      </ng-template>
  </p-dialog>
</div>
